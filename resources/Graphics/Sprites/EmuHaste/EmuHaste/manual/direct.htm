<HTML>
<HEAD><TITLE>DIRECT MODE</TITLE></HEAD>
<BODY>
ここはマニア向けの項目です。できるだけ効率良くサーチしたい人はどうぞ。<br>

<h2>ダイレクトモード</h2>
emuhasteのコンフィグファイル構文では、<br>
<font color=red><b>「どうしてもコンフィグファイルではベースアドレスを検出できない」</b></font><br>
ようなシーンに出会うことが多々あると思います。<br>
例えば「キー 0C2DFE27 を探し、見つかったアドレス+4バイトにある値をアドレスとしてロード〜」など、<br>
変則的なアドレス配置には太刀打ちできないわけですね。<Br>
そこでemuhasteではコマンドラインから以下の引数を指定して起動することが出来ます。<br><br>

<b>&gt emuhaste.exe プロセス名 実開始アドレス 仮想開始アドレス 領域サイズ コメント</b><br><br>

つまりコンフィグファイルの PROCESS_NAME・BASE_ADDR・VIRTUAL_ADDR・MEMORY_SIZE・COMMENTを<br>
一発で指定して起動することが可能で、この状態を「ダイレクトモード」と言います。<br>
なので、ベースアドレスを検出する外部プログラムを組んで、emuhasteに引数として渡せば、<br>
事実上「どんなエミュレータでもサーチは可能」ということになります。

<h2>カスタムスナップメニュー</h2>
通常、[SNAP PROCESS]を実行するとコンフィグファイルで指定されたプロセスを検索しますが、<br>
<font color=red><b>CTRLを押しながら[SNAP PROCESS]をクリック</b></font>でCUSTOM SNAP MENUが開きます。<br>
<img src="./img_04.png"><br>
・対象プロセスの変更(Target Process)<br>
上図の"PCSX2 0.9.6.EXE"では、アンオフィシャルビルド版やプログラム名の違うバージョンでは<br>
通常のスナップだと「対象プロセスが見つかりません」と表示してエラーで止まってしまいますが、<br>
カスタムスナップメニューで対象プロセスを手動で変更することが可能です。<br>
ただし、コンフィグファイル作者が「あえてバージョンチェックのために」固定している場合もあるので、<br>
使用するときは注意してください。<br><br>

・サーチフラグを初期化しない(Not initialize the Memorymap&Search info)<br>
通常、スナップ時にサーチ情報やメモリレイアウトは全て初期化されてしまいますが、<br>
これをチェックしておくと、それまでの検索結果などを引き継いだままサーチを継続できます。<br>
サーチ＆改造コードの動作検証中にエミュレータがクラッシュしてしまった場合も、<br>
再びエミュレータでゲームを読み込んでから引き継ぎスナップをすることでサーチを継続できます。<br>
ただし、サーチフラグ情報だけでなくバッファ内容も保持されたままなので、使い方を誤ると相当危険です。<br><br>

・サーチ範囲のメモリ属性をWriteに変更(Memory Attribute [Write] hack)<br>
プログラムによっては外部からの改竄を禁止するため、メモリマップの一部を<br>
リードオンリー属性にすることがありますが、このチェックを入れておくと強制的に<br>
書き込めるように属性を変更します。言うまでもなく、使い方を誤ると危険です。<br>
</BODY>
</HTML>